
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>蝦仁成本報價試算表</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background-color: #f0f4f8; padding: 20px; }
    .container { max-width: 720px; margin: auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    input, button { width: 100%; padding: 12px; margin: 10px 0; border-radius: 6px; border: 1px solid #ccc; font-size: 16px; }
    button { background-color: #007BFF; color: white; border: none; cursor: pointer; }
    button:hover { background-color: #0056b3; }
    h2 { color: #333; }
    .highlight { font-weight: bold; font-size: 18px; color: #d00; }
  </style>
</head>
<body>
  <div class="container">
    <h2>蝦仁成本報價試算表</h2>
    <label>原料重量 (kg)：<input type="number" id="rawWeight" value="16"></label>
    <label>原料單價 (元/kg)：<input type="number" id="rawPrice" value="420"></label>
    <label>發泡率 (%)：<input type="number" id="foamRate" value="25"></label>
    <label>包冰率 (%)：<input type="number" id="iceRate" value="20"></label>
    <div>
      <label><input type="checkbox" id="cutBack"> 割背</label>
      <label><input type="checkbox" id="foamOut"> 委外發泡</label>
      <label><input type="checkbox" id="foamSelf"> 自行發泡</label>
      <label><input type="checkbox" id="icePack"> 包冰</label>
    </div>
    <button onclick="calculate()">計算成本</button>
    <p class="highlight" id="costResult"></p>
    <p class="highlight" id="suggestedPrice"></p>
    <button onclick="goToBonus()">➡ 前往業務獎金頁</button>
  </div>
<script>
  function calculate() {
    const rw = parseFloat(document.getElementById("rawWeight").value);
    const rp = parseFloat(document.getElementById("rawPrice").value);
    const fr = parseFloat(document.getElementById("foamRate").value);
    const ir = parseFloat(document.getElementById("iceRate").value);
    const cb = document.getElementById("cutBack").checked;
    const fo = document.getElementById("foamOut").checked;
    const fs = document.getElementById("foamSelf").checked;
    const ice = document.getElementById("icePack").checked;

    if (!fo && !fs) return alert("請選擇一種發泡方式");
    if (fo && fs) return alert("只能選擇一種發泡方式");
    if (!cb && fr > 25) return alert("未割背不得超過25%發泡率");

    const foamWeight = rw * (1 + fr/100);
    const finalWeight = foamWeight * (1 + (ice ? ir/100 : 0));
    const cost = rw * rp + (cb ? rw*13 : 0) + (fo ? foamWeight*15 : (fs ? foamWeight*12 : 0)) + (ice ? finalWeight*18 : 0);
    const costPerKg = cost / finalWeight;
    const basePrice = costPerKg / 0.85;

    document.getElementById("costResult").innerText = `每公斤底價：${basePrice.toFixed(0)} 元`;
    document.getElementById("suggestedPrice").innerText = `建議報價：${(basePrice * 1.25).toFixed(0)} 元`;
    localStorage.setItem("basePrice", basePrice.toFixed(0));
  }

  function goToBonus() {
    if (!localStorage.getItem("basePrice")) return alert("請先計算成本");
    window.location.href = "bonus.html";
  }
</script>
</body>
</html>
